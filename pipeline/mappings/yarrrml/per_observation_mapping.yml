prefixes:
  stapi: "https://pod.rubendedecker.be/scholar/ontologies/stapi#"
  xsd: "http://www.w3.org/2001/XMLSchema#"
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"

mappings:
  observation:
    sources:
      - ['data.json~jsonpath', '$']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:Observation]
      - [stapi:phenomenonTime, $(phenomenonTime), xsd:duration]
      - [stapi:resultTime, $(resultTime), xsd:dateTime]
      - [stapi:result, $(result)]
      - [stapi:datastream, "$(['datastream']['@iot.selfLink'])~iri" ]
      - [stapi:featureOfInterest, "$(['featureOfInterest']['@iot.selfLink'])~iri" ]

  datastream:
    sources:
      - ['data.json~jsonpath', '$.datastream']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:Datastream]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:observationType, $(observationType)~iri]
      - [stapi:unitOfMeasurement, $(unitOfMeasurement), rdf:JSON]
      - [stapi:observedArea, $(observedArea), rdf:JSON]
      - [stapi:phenomenonTime, $(phenomenonTime), xsd:duration]
      - [stapi:resultTime, $(resultTime), xsd:dateTime]
      - [stapi:properties, $(properties), rdf:JSON]
      - [stapi:observedProperty, "$(['observedProperty']['@iot.selfLink'])~iri" ]
      - [stapi:sensor, "$(['sensor']['@iot.selfLink'])~iri" ]
      - [stapi:thing, "$(['thing']['@iot.selfLink'])~iri" ]

  thing:
    sources:
      - ['data.json~jsonpath', '$.datastream.thing']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:Thing]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:properties, $(properties), rdf:JSON]
      - [stapi:locations, $(locations)~iri]

  observedProperty:
    sources:
      - ['data.json~jsonpath', '$.datastream.observedProperty']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:ObservedProperty]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:definition, $(definition)]

  sensor:
    sources:
      - ['data.json~jsonpath', '$.datastream.sensor']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:Sensor]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:encodingType, $(encodingType)]
      - [stapi:metadata, $(metadata), rdf:JSON]

  location:
    sources:
      - ['data.json~jsonpath', '$.datastream.thing.locations[*]']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:Location]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:encodingType, $(encodingType)]
      - [stapi:location, $(location), rdf:JSON]
      - [stapi:properties, $(properties), rdf:JSON]
      
  featureOfInterest:
    sources:
      - ['data.json~jsonpath', '$.featureOfInterest']
    s: $(['@iot.selfLink'])
    po:
      - [a, stapi:FeatureOfInterest]
      - [stapi:name, $(name)]
      - [stapi:description, $(description)]
      - [stapi:encodingType, $(encodingType)]
      - [stapi:feature, $(feature), rdf:JSON]
      - [stapi:properties, $(properties), rdf:JSON]
    